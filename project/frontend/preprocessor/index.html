<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì „ì²˜ë¦¬ê¸° ì„¤ì •</title>
  <link rel="stylesheet" href="/frontend/preprocessor/style.css" />
</head>
<body>
  <div class="container">
    <h1>ğŸ§¾ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ê¸°</h1>

    <div class="section">
      <label for="processType">ì²˜ë¦¬ ìœ í˜• ì„ íƒ</label>
      <select id="processType">
        <option value="manual">ë©”ë‰´ì–¼</option>
        <option value="sql">SQL</option>
      </select>

      <label for="fileInput">í…ìŠ¤íŠ¸ ë˜ëŠ” PDF íŒŒì¼ ì—…ë¡œë“œ</label>
      <input type="file" id="fileInput" accept=".txt,.pdf" />

      <label for="splitMethod">í…ìŠ¤íŠ¸ ë¶„í•  ë°©ë²•</label>
      <select id="splitMethod">
        <option>RecursiveCharacterTextSplitter</option>
        <option>CharacterTextSplitter</option>
        <option>MarkdownHeaderTextSplitter</option>
      </select>

      <label for="chunkSize">Chunk Size</label>
      <input type="range" id="chunkSize" min="100" max="2000" value="200" />
      <span id="chunkSizeValue">200</span>

      <label for="chunkOverlap">Chunk Overlap</label>
      <input type="range" id="chunkOverlap" min="0" max="500" value="0" />
      <span id="chunkOverlapValue">0</span>

      <label for="vectorType">ë²¡í„° ì €ì¥ì†Œ ìœ í˜•</label>
      <select id="vectorType">
        <option>Chroma</option>
        <option>FAISS</option>
      </select>

      <label for="searchType">ê²€ìƒ‰ ìœ í˜•</label>
      <select id="searchType">
        <option>similarity</option>
        <option>mmr</option>
      </select>

      <label for="topK">ê²€ìƒ‰ ê²°ê³¼ ìˆ˜(k)</label>
      <input type="range" id="topK" min="1" max="10" value="3" />
      <span id="topKValue">3</span>

      <label for="embeddingModel">ì„ë² ë”© ëª¨ë¸</label>
      <select id="embeddingModel">
        <option>sentence-transformers/all-MiniLM-L6-v2</option>
        <option>sentence-transformers/paraphrase-MiniLM-L6-v2</option>
        <option>sentence-transformers/multi-qa-MiniLM-L6-cos-v1</option>
        <option>sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2</option>
        <option>openai/text-embedding-3-small</option>
        <option>openai/text-embedding-ada-002</option>
      </select>

      <div class="button-container">
        <button onclick="processData()" id="processBtn">ğŸš€ ë°ì´í„° ì²˜ë¦¬</button>
      </div>

      <div id="loading">âš™ï¸ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</div>
      <div id="statusArea"></div>

      <div id="previewArea" class="preview-section" style="display: none;">
        <h3>ğŸ“„ ëœë¤ ì²­í¬ ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°</h3>
        <p><strong>ğŸ“ ì¶œì²˜:</strong> <span id="sourceFile"></span></p>
        <div id="sampleContent" class="preview-content"></div>
      </div>
    </div>

    <!-- ğŸ› ï¸ ë¡œê·¸ íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ -->
    <div class="log-section">
      <h3>ğŸ› ï¸ ë¡œê·¸ íŒŒì¼ ì—…ë¡œë“œ ë° DB ì €ì¥</h3>
      <form id="log-upload-form" enctype="multipart/form-data">
        <input type="file" name="file" accept=".txt,.tsv,.csv" required />
        <button type="submit">ì—…ë¡œë“œ ë° ì €ì¥</button>
      </form>
      <pre id="log-upload-result"></pre>
    </div>
  </div>

  <script src="/frontend/preprocessor/preprocessor.js"></script>
</body>
</html>
