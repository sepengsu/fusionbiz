# 📘 RAG 기반 공장 로그 챗봇 프로젝트 계획서

## 🧾 프로젝트 개요

### 🎯 목표

공장 실무자가 복잡한 SQL이나 시스템 명령어를 몰라도,
자연어로 기계 상태를 질의할 수 있는 **RAG 기반 챗봇 시스템**을 구현한다.

### 🔍 사용 기술

* GPT-4 기반 LLM
* RAG (Retrieval-Augmented Generation)
* LangChain (or custom pipeline)
* FAISS or Chroma Vector Store
* Python / Pandas for log 전처리
* Streamlit or Gradio (챗봇 UI)

---

## 🏗️ 시스템 구성도

```plaintext
[사용자 입력]
   │ 자연어 질의
   ▼
[질문 분석기 (LLM)]
   │
   ├── 수치 기반 질문? → [파이썬 계산기 or SQL 질의기]
   ├── 요약/문맥 질문? → [Retriever + GPT]
   ▼
[Retriever (FAISS / Chroma)]
   │
   ▼
[관련 문서 Chunk 추출]
   │
   ▼
[GPT 응답기]
   → 자연어 응답 생성
```

---

## 📦 데이터 처리 파이프라인

1. **원본 로그 수집**

   * CSV or TXT 형식
   * 컬럼: 날짜, 시간, 상태(operation)

2. **전처리**

   * `datetime` 기준 정렬
   * 10분 단위 chunk 생성
   * 상태 전이 요약 삽입
   * 문단 단위 마크다운 또는 txt 저장

3. **벡터화**

   * Sentence-BERT / OpenAI embedding
   * Vector DB (FAISS) 저장

---

## 🤖 질의 유형별 처리 방식

| 질문 유형     | 처리 방식            | 예시                 |
| --------- | ---------------- | ------------------ |
| 오류 개수, 시간 | 카운터 모듈 or SQL 생성 | "1월 29일 오류 몇 번?"   |
| 시점별 상태    | RAG + GPT 요약     | "오전 9시에 무슨 일 있었어?" |
| 상태 흐름 파악  | 상태 전이 기반 요약      | "에러 후 바로 작동했어?"    |

---

## 📈 기대 효과

* 공장 실무자도 쉽게 로그 탐색 가능
* SQL 없이도 오류/정지 시점 파악
* 보고서/대시보드 자동화 기반 가능

---

## 🔧 기술 설계 요약

| 구성 요소  | 도구                          |
| ------ | --------------------------- |
| 문서 전처리 | Python + Pandas             |
| 임베딩    | OpenAI Embedding / KoSimCSE |
| 벡터 스토어 | FAISS / Chroma              |
| 검색기    | LangChain Retriever         |
| 응답기    | GPT-4                       |
| 계산기    | Python 툴 등록                 |
| 프론트엔드  | Streamlit / Gradio          |

---

## 📅 개발 일정 예시

| 주차  | 목표                 |
| --- | ------------------ |
| 1주차 | 로그 데이터 정리 및 전처리    |
| 2주차 | 임베딩/벡터 DB 구축       |
| 3주차 | 질의응답 로직 + 요약 응답 생성 |
| 4주차 | 카운터/분기 로직 추가       |
| 5주차 | UI 구성 및 테스트        |
| 6주차 | 발표 및 시연 준비         |

---

## 🧠 향후 확장 가능성

* 에러 이상 탐지 모델 연계
* 정지 패턴 자동 분석
* 실시간 로그 스트리밍 대응
* 정기 보고서 자동화 (PDF or 텍스트 요약)

---

## 🎨 추가: Streamlit 기반 간단한 UI 설계 구상

```plaintext
┌─────────────────────────────────────────────┐
│ 공장 로그 분석 챗봇 🔍                           │
├─────────────────────────────────────────────┤
│ 사용자 질문: [   오전 9시에 무슨 일이 있었어?   ] │
├─────────────────────────────────────────────┤
│ 📚 관련 로그 블록:                             │
│ [09:00~09:10] 작동 → 오류 → 정지            │
│ [09:10~09:20] 오류 → 정지                     │
├─────────────────────────────────────────────┤
│ 🤖 GPT 응답:                                  │
│ 9시대에는 총 5번의 오류가 발생했고, 그 중 2회는 │
│ 바로 정지로 이어졌습니다.                     │
└─────────────────────────────────────────────┘
```

---

## 📌 평가 항목 제안

| 항목     | 기준                     |
| ------ | ---------------------- |
| 정확도    | 오류 개수, 정지 시점 등의 응답 일치율 |
| 문맥 적합성 | GPT 응답이 문서 맥락과 일치하는가?  |
| 처리 속도  | 실시간 응답 가능 여부           |
| 사용성    | 실무자가 직관적으로 사용할 수 있는지   |

---

## 📚 참고 및 연계 기술

* LangChain Tool Integration
* OpenAI function calling API
* FAISS Index 구성 방식
* logstash/fluentd를 통한 로그 스트리밍 연계 가능성
